{
    "manifest_version":"1.0",
    "tradeshift_version":"2.0",
    "vendor_id":"JansTestCompany",
    "app_id":"GoogleAddressbook",
    "version":"0.0.1",
    "comments":"Comment on anything. Comments are private.",
    "default_locale":"en-GB",
    "capabilities":{
        "access":["network_view",
            "network_create",
            "network_delete"
        ]
    },
    "locales":{
        "en-GB":{
            "app_name":"Google Addressbook Import",
            "app_desc":"This application demonstrates how to connect with your Google Contact list over OAuth, and import contacts as Tradeshift manual connections. If you want to run the app yourself, make sure to replace ALL occurrances of the vendor id with yours."
        }
    },
    "images":{
        "icon_small.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sBGA84OCghU9QAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAADDklEQVRIx7WWT28bVRTFf2fm2Y6NA4nSKI1UxK4EsWDRFikSn6RigVgjxJ5/KyS+QfkCwIYNS9iAkECoorsoVSUEqpS0agIEbMeOPfPeYWE7tpNJyyI8aTRXo/fOu/e8c88bvfP93wkskAEuOw7R1uzDdFxeHKJlQMBk58uNQ5nM04Y0nlmm8YMgF9SyMZKfvpyQTilC87jTdaMSFclsPJezvpQJ4M9+5PEgKWSikQst0LKIE8p0EUXmeGRdXc795laLV1ZyLdflDOgMrV+PSn/+oM/DXlK7nk0LqaDoghpHpXlpNfD+zWWuNMZJdYaJwrC2lHFzs87Was6nv3TZ7SQauf47RWVEWS5ub7W40pCw+epBn2/2RyoS3Nhs8PZWU+2lnNvXm3xy71j9aOrZeYqyMsllEpO3yyT6pb3Ryv3ySgDwvUdDf7Y74Ek/uTNM/nL3mB8PCgO+vhLYaGUeFJzDKZMcYoWK6jnsdwve/e6IjWbGX4NIyMfqKZJZqonVxjjdIplhNNEmpgqKSnOOIiGVyTzqRfa6UWNZis4oqRYy3rvR5tZaEMBPj0f83o0KmShdoaJkV6hItiEXChordlBa9ZD7o+3n2V4PAnz/cMidnYEKyzWJyXmebbSqszfGp10kTIn48PVlttcDAD/vnfDx3S69CO26qMaBEI3Gm2rqScAk7Qn+oDC3rjV442pNAD88HPDB3a5GFq0AZWJh7Xwc4ilFXijNMz59EmGzlStMGvDr307UjfILNRFtyUxP8gyOL6YIfLpLyGDncMSdHegNE/f/KWlkpkjjuZpn/jxFVV60SFFpyATNIK2GnBfbgf3DQs18popZYmdUFE21Fxk8KbM3Sry63tBbWy0DdPpR3+6PXF86zWaOojMqihepaM6jDBydRPoJWk78MUyAiUmzei+gSK99ceCq+8JzDhxt1po519o5OWavF3kySIRsKsCxlBcd29NOnm80UxVL4qAftdcrDaKWoVomR3vaJues/hmNVqWqsV1MR/GMm3Bm16n6RrusOJSW/8/fln8BCxTmj5DtdakAAAAASUVORK5CYII=",
        "icon_medium.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sBGA84H40r5r8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAGk0lEQVRo3u1ZTYhlRxk9p27d99evu+fXcSYkGlsczQgByYD4ExfjRpCQgC7EjbsEMeBCRBBRVyIBySJLt+JCFy4CI4g/2SQOs5EEGRPGMWEyP844Tne/7tfv3Xurjouq++573a+7330mJg+80PTXt+tWfVXfqfOdr4rPvrTuARGgAGDRbCuJ1YvyWRzbelELHQEnLPRjBRECwBiaBbOtRAEghDIWC2Vbr8XGkPUjFsLY7l4c2woRQhgLzZy2JOYeKrzgNNaGYELKGiA1JN+BsUrbeo12RMmtM9rVYwgMC2HogeNtg2OtBEuWSGJz54F+IdwfePxr4JEkRCcB/B701vWBuyEkHGQTouKfgsjo3HYhrh1P8fnTDXz8qOWHlhN0gvejcA9yz+s9hzf+nePPtzK+uu7QSQnLEgIECeoQH3bb/Ppv7/uZQ8YKKgBUOGEI8smPtfWVh5voJhy19xIVvSFBQ476yXOvi9d28MurA+aGapowWXLkfw0IoQYLlTlQQuEBWuLZR5dx4ZQdNZBCM0NObDevsClIIk0Nnji7hI+sJPjZq31sOKGREJyDEY2H6CHE3wfagugFegF9J37tXJcXTllAosKKgyQNSXjh7V7Ba5sFN3LBMDySoJB8+MnTLXzzEy26wtP52H8NfzzGE9kMIYuiCYNcPHempaceSMN7UpDAQDB68Y0+/nQ752YuOQCNhFw7muobj3RwIiW9JBNn+9hDbX3xVoaLdxxXUlPGYB4Wmu07A2JI4qm1VomnuJsIeI8XLvfwmxs5EgM0TICR88Lr93JcWXf40aeX8WCTqDwlvvxwG3+4vQWncpQa/kigF+FFHmZL5LAQTx9JcbZrGMZnXHnwd1f7ePFmzk6D7KYGaUKmhmxbgyNNw3/cy/jra8NyvuUseKKbcG2J2PFgHX+8SOulEYTGwzfNFqDMC6c7hk3LyeXIHf74dkYlVMLAQqMEBxCgWka4vllww0OrBuXE1bDEcssw73ulycE+7Latr7nrGwlx5fYA3/p9hjNLCU60DR7oJshzhyubDi1rpiSooLwyL3QbxJLBRDKSAOcCTfgJpTCLnK6thQjngdvbjje2HKQgGwigkxpQmvrtoBCRGlx4sAkbvVZE4Fbm8VbPIzWGkuppodoVWciDTAhZUzL7WPIab0+KErZzUdbo259awRdOWEpS2AQBBn+5NcSbQ3C1CfmAvNkrsroQgioQYo+OmgQNBQwKYWXJ4jvnl/G547ZKbF4whtjoZfj533ZgEzPGQrUgVC5E6cXhdvT7kPbCZiZ+9ANN/OB8F2udoBciZ9AYoMgK/OTyFq9nwHIKeM3uQ2lbjbHQLOQbMRTfa0obigQ2h+LZD7b03Ge6OG5JJ8mUigdQNizw41c2+fJ9ryXLwFTar88DEpnDHBgKsmIqdAiPYQ58+GQDPw3OQxJM/NIAWO/l+P7LG7i84bHaMKG3/ZD4brCQNE3ihid3YpImePrRLk5acixTkwD+fneIH17q8fVtj5UGS11UdY6aLKQ6LBTlbhXuvYyx7aDzZ5p4/FhCeYmmYpvXbuzge5e2QiJrmOg8yx4DPGqzkFBfTu8tykayiCTOnUoD0zBqFRJ37g/x3Vd6uOuIlTTkkt212DznC9bXZSHGgaYwhhdgAD7USaodLYAELl7d4T8zYKlBOD+t/1D4VHt4VhZiTRYSq/ecZAyvIK1XmwmAWIWF4XhjAPkY+niUVn07XoWxJgt51WchxRBMnLPGqksQbvZy3Gsn6BdhtCOpcHfogah1qCnYm4+EwM/+6k7NKbCawD7bxBrC7jo76ReC4XQnNdLXRN1cPNfptEaJjLveh85OdhIcbYB+rKjPMunNLQdfFu8TfZYF3XRme+dYCAezkBeQC3jmsVV86VQy8b+3bu7gqy/14AjYaXHle8FCo8UK/3QC/D5JhwiHAT7QK6tFxGhLz8dCqMdCECsIxZKw5BHFrBSjSh85iySdAgsJoCrRX502H6iv3i0W2rUlg6apkpSLiLYEXDhOgYApVZf+GwjNroXIUHBVcnpSt3gBTuJyM9SMqeHo22MN0ktwATN7+ueo/7paCLOzUKm7gnLhnrASYEro+Uvr+EUzwAYIh1r9gROMgQl3LNPPnfQ/YaH9dS/jz1/vZhj6Se8SEzTQfppHh/R9wB1Z3YqM+4a1JJN2atCe0mYs/e0DCdavyHzNiuz9Zs+VyN5fd2RY8Dsy/P+m/j2/ZsWCX7NW5yMLyUL/AStWNW8tznKTAAAAAElFTkSuQmCC",
        "icon_large.png":"data:image/png;base64,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"
    },
    "icons":{
        "24":"icon_small.png",
        "48":"icon_medium.png",
        "128":"icon_large.png"
    },
    "components":{
        "MyComponent":{
            "activation":"/app/JansTestCompany.GoogleAddressbook",
            "integration":{
                "append":"#mainframe"
            },
            "capabilities":{
                "remote":{
                    "getRequest":{
                        "requestToken":{
                            "url":"https://www.google.com/accounts/OAuthGetRequestToken",
                            "request_key":"anonymous"
                        },
                        "accessToken":{
                            "url":"https://www.google.com/accounts/OAuthGetAccessToken",
                            "request_key":"anonymous"
                        },
                        "contacts":{
                            "url":"https://www.google.com/m8/feeds/contacts/default/full",
                            "request_key":"anonymous"
                        }
                    }
                },
                "rest":{
                    "getRequest":true,
                    "generateGUID":true
                },
                "data":{
                    "getDatasource":true
                },
                "system":{
                    "alert":true
                },
                "console":{
                    "log":true
                },
                "ui":{
                    "href":true
                },
                "storage":{
                    "getStorage":true
                }
            },
            "code":{
                "css":"%2F*%20%0A%20*%20Rules%20must%20start%20with%20selector%20to%20match%20%0A%20*%20the%20component%3A%20.vendor.app.component%0A%20*%2F%0A.MyCompany.MyApp.MyComponent%20%7B%0A%20%20%20%20display%3A%20block%3B%0A%7D%0A%0A.JansTestCompany%20input%5Bcheckbox%5D%7B%0A%09display%3Ainline%3B%0A%7D",
                "js":"%2F**%0A%20*%20The%20lib%20object%20is%20configured%20with%20properties%20and%0A%20*%20methods%20according%20to%20the%20components%20%22capabilities%22.%0A%20*%20%40param%20%7Bobject%7D%20lib%0A%20*%2F%0Afunction%20Component%20(%20lib%20)%20%7B%0A%0A%09var%20URL_AUTH%20%3D%20%22https%3A%2F%2Fwww.google.com%2Faccounts%2FOAuthAuthorizeToken%22%3B%0A%09var%20UI_NS%20%3D%20%22http%3A%2F%2Fgo.tradeshift.com%2Fns%2Fui%23%22%3B%0A%09var%20MY_URL%20%3D%20%22https%3A%2F%2Fsandbox.tradeshift.com%2Fapp%2FJansTestCompany.GoogleAddressbook%22%3B%0A%20%20%20%20%20%20%20%20%2F%2Fvar%20MY_URL%20%3D%20%22http%3A%2F%2Flocalhost%3A8080%2Fapp%2FOfficialTradeshiftTestUS.GoogleAddressbook%22%3B%0A%09%0A%09var%20pageQuery%20%3D%20null%3B%0A%0A%09function%20parseQuery%20(s)%20%7B%0A%09%09var%20result%20%3D%20%7B%7D%3B%0A%09%09if%20(s%20%3D%3D%3D%20null)%20%7B%20return%20result%3B%20%7D%0A%09%09var%20items%20%3D%20s.split(%22%26%22)%3B%0A%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20items.length%3B%20i%2B%2B)%20%7B%0A%09%09%09var%20kv%20%3D%20ADSAFE.get(items%2C%20i).split(%22%3D%22)%3B%0A%09%09%09var%20key%20%3D%20decodeURIComponent(kv%5B0%5D)%3B%0A%09%09%09var%20value%20%3D%20decodeURIComponent(kv%5B1%5D)%3B%0A%09%09%09ADSAFE.set(result%2C%20key%2C%20value)%3B%0A%09%09%7D%0A%09%09return%20result%3B%0A%09%7D%0A%09%0A%09function%20showSetupLink%20(dom%2C%20storage)%20%7B%0A%09%09%2F%2F%20Request%20token%20and%20present%20setup%20link%0A%09%09lib.ts.remote.getRequest%20(%20%22requestToken%22%20)%0A%09%09%09.queryParam%20(%22scope%22%2C%20%22https%3A%2F%2Fwww.google.com%2Fm8%2Ffeeds%2Fcontacts%2Fdefault%2Ffull%22)%0A%09%09%09.queryParam%20(%22oauth_callback%22%2C%20MY_URL)%0A%09%09%09.queryParam%20(%22xoauth_displayname%22%2C%20%22Tradeshift%20Google%20Integration%22)%0A%09%09%09.get%20(%20function%20(%20s%20)%20%0A%09%09%7B%0A%09%09%09var%20response%20%3D%20parseQuery(s)%3B%0A%09%09%09storage.setItem(%22token%22%2C%20response.oauth_token)%3B%0A%09%09%09storage.setItem(%22secret%22%2C%20response.oauth_token_secret)%3B%0A%09%09%09var%20a%20%3D%20dom.q%20(%20%22div.setup%20a%22%20)%3B%09%0A%09%09%09var%20url%20%3D%20URL_AUTH%20%2B%20%22%3Foauth_token%3D%22%20%2B%20encodeURIComponent(response.oauth_token)%3B%0A%09%09%09lib.ts.ui.href(a%2C%20url)%3B%0A%09%09%09dom.q(%22div.setup%22).style(%22display%22%2C%20%22%22)%3B%0A%09%09%7D)%3B%0A%09%7D%0A%09%0A%09function%20loadGoogle%20(dom%2C%20storage%2C%20token%2C%20secret)%20%7B%0A%09%09var%20main%20%3D%20dom.q%20(%22div.main%22)%3B%0A%09%09lib.ts.remote.getRequest%20(%20%22contacts%22%20)%0A%09%09%09.oauthToken(token)%0A%09%09%09.oauthTokenSecret(secret)%0A%09%09%09.get(function(result)%20%0A%09%09%7B%0A%09%09%09lib.ts.console.log%20(result)%3B%0A%09%09%09var%20main%20%3D%20dom.q(%22div.main%22)%3B%0A%09%09%09var%20i%20%3D%200%2C%20entry%20%3D%20ADSAFE.get(result.feed.entry%2C%20i)%3B%0A%09%09%09var%20cbs%20%3D%20%5B%5D%2C%20names%20%3D%20%5B%5D%2C%20emails%20%3D%20%5B%5D%2C%20phones%20%3D%20%5B%5D%2C%20companies%20%3D%20%5B%5D%3B%0A%09%09%09while%20(entry%20!%3D%3D%20undefined)%20%7B%0A%09%09%09%09var%20name%20%3D%20entry.title.%24%3B%0A%09%09%09%09var%20email%20%3D%20ADSAFE.get(entry%2C%20%22gd%3Aemail%22)%3B%0A%09%09%09%09if%20(email%20!%3D%3D%20undefined)%20%7B%20email%20%3D%20ADSAFE.get(email%2C%20%22%40address%22)%3B%20%7D%0A%09%09%09%09var%20company%20%3D%20ADSAFE.get(entry%2C%20%22gd%3Aorganization%22)%3B%0A%09%09%09%09if%20(company%20!%3D%3D%20undefined)%20%7B%20company%20%3D%20ADSAFE.get(company%2C%20%22gd%3AorgName%22).%24%3B%20%7D%0A%09%09%09%09var%20phone%20%3D%20ADSAFE.get(entry%2C%20%22gd%3AphoneNumber%22)%3B%0A%09%09%09%09if%20(phone%20!%3D%3D%20undefined)%20%7B%20phone%20%3D%20phone.%24%3B%20%7D%0A%09%09%09%09if%20(email%20!%3D%3D%20undefined)%20%7B%0A%09%09%09%09%09if%20(name%20%3D%3D%3D%20undefined)%20%7B%20name%20%3D%20%22(Unnamed)%22%3B%20%7D%0A%09%09%09%09%09if%20(company%20%3D%3D%3D%20undefined)%20%7B%20company%20%3D%20name%3B%20%7D%0A%09%09%09%09%09if%20(phone%20%3D%3D%3D%20undefined)%20%7B%20phone%20%3D%20%22%22%3B%20%7D%0A%09%09%09%09%09var%20p%20%3D%20dom.tag(%22div%22)%3B%0A%09%09%09%09%09var%20cb%20%3D%20dom.tag(%22input%22%2C%20%22checkbox%22)%3B%0A%09%09%09%09%09cbs.push(cb)%3B%0A%09%09%09%09%09names.push(name)%3B%0A%09%09%09%09%09emails.push(email)%3B%0A%09%09%09%09%09phones.push(phone)%3B%0A%09%09%09%09%09companies.push(company)%3B%0A%09%09%09%09%09cb.style(%22display%22%2C%22inline%22)%3B%0A%09%09%09%09%09cb.style(%22padding-right%22%2C%225px%22)%3B%0A%09%09%09%09%09p.append(cb)%3B%0A%09%09%09%09%09p.append(dom.text(name%20%2B%20%22%20%5B%22%20%2B%20email%20%2B%20%22%5D%22))%3B%0A%09%09%09%09%09main.append(p)%3B%0A%09%09%09%09%7D%0A%09%09%09%09i%2B%2B%3B%0A%09%09%09%09entry%20%3D%20ADSAFE.get(result.feed.entry%2C%20%22%22%20%2B%20i)%3B%0A%09%09%09%7D%0A%09%09%09var%20btn%20%3D%20dom.tag(%22a%22)%3B%0A%09%09%09btn.klass(%22button%20action%20r_all%20left%22)%3B%0A%09%09%09btn.append(dom.text(%22Import%22))%3B%0A%09%09%09btn.on(%22click%22%2C%20function(evt)%7B%0A%09%09%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20cbs.length%3B%20i%2B%2B)%20%7B%0A%09%09%09%09%09if%20(ADSAFE.get(cbs%2Ci).getCheck())%20%7B%0A%09%09%09%09%09%09var%20name%20%3D%20ADSAFE.get(names%2Ci)%3B%0A%09%09%09%09%09%09var%20email%20%3D%20ADSAFE.get(emails%2Ci)%3B%0A%09%09%09%09%09%09var%20company%20%3D%20ADSAFE.get(companies%2Ci)%3B%0A%09%09%09%09%09%09var%20phone%20%3D%20ADSAFE.get(phones%2Ci)%3B%0A%09%09%09%09%09%09var%20firstName%20%3D%20name%3B%0A%09%09%09%09%09%09var%20lastName%20%3D%20%22%22%3B%0A%09%09%09%09%09%09if%20(name.indexOf(%22%20%22)%20!%3D%3D%20-1)%20%7B%0A%09%09%09%09%09%09%09firstName%20%3D%20name.substring(0%2C%20name.indexOf(%22%20%22))%3B%0A%09%09%09%09%09%09%09lastName%20%3D%20name.substring(name.indexOf(%22%20%22)%20%2B%201)%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%0A%09%09var%20id%20%3D%20lib.ts.rest.generateGUID()%3B%0A%09%09var%20body%20%3D%20%7B%20%0A%09%09%09%22ConnectionType%22%3A%20%22ExternalConnection%22%2C%0A%09%09%09%22CompanyName%22%20%3A%20company%2C%0A%09%09%09%22DispatchChannelID%22%20%3A%20%22EMAIL%22%2C%0A%09%09%09%22Email%22%20%3A%20email%2C%0A%09%09%09%22FirstName%22%3A%20firstName%2C%0A%09%09%09%22LastName%22%3A%20lastName%2C%0A%09%09%09%22Country%22%3A%20%22DK%22%0A%09%09%7D%3B%0A%09%09%0A%09%09lib.ts.rest.getRequest%20()%0A%09%09%09.path(%22network%2Fconnections%22)%0A%09%09%09.path(id)%0A%09%09%09.contentType(%22application%2Fjson%22)%0A%09%09%09.put%20(null%2C%20body)%3B%0A%09%09%09%09%09%09%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%0A%09%09%09%09main.append(dom.text(%22Creating%20contacts.%20Check%20your%20network%20page%20for%20the%20result.%22))%3B%0A%09%09%09%7D)%3B%0A%09%09%09var%20line%20%3D%20dom.tag(%22div%22)%3B%0A%09%09%09line.klass(%22line%20buttons%22)%3B%0A%09%09%09line.append(btn)%3B%0A%09%09%09main.append(line)%3B%20%0A%09%09%7D%2C%20function(error)%7B%20%0A%09%09%09showSetupLink%20(dom%2C%20storage)%3B%0A%09%09%7D)%3B%0A%09%7D%0A%09%0A%09function%20initialize(dom)%20%7B%0A%09%09if%20(pageQuery%20%3D%3D%3D%20null%20%7C%7C%20pageQuery%20%3D%3D%3D%20undefined)%20%7B%0A%09%09%09ADSAFE.later%20(function()%7B%20initialize(dom)%3B%20%7D%2C%202000)%3B%0A%09%09%09return%3B%0A%09%09%7D%0A%09%09lib.ts.storage.getStorage%20(function(storage)%20%7B%0A%09%09%09var%20token%20%3D%20storage.getItem(%22token%22)%3B%0A%09%09%09var%20secret%20%3D%20storage.getItem(%22secret%22)%3B%0A%09%09%09if%20(pageQuery.oauth_token%20!%3D%3D%20undefined%20%26%26%20pageQuery.oauth_verifier%20!%3D%3D%20undefined)%20%7B%0A%09%09%09%09if%20(token%20%3D%3D%3D%20pageQuery.oauth_token)%20%7B%0A%09%09%09%09%09%2F%2F%20Verification%20request%20back%20from%20google%0A%09%09%09%09%09lib.ts.remote.getRequest%20(%20%22accessToken%22%20)%0A%09%09%09%09%09%09.oauthToken(token)%0A%09%09%09%09%09%09.oauthTokenSecret(secret)%0A%09%09%09%09%09%09.queryParam(%22oauth_verifier%22%2C%20pageQuery.oauth_verifier)%0A%09%09%09%09%09%09.get%20(%20function%20(%20s%20)%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09var%20response%20%3D%20parseQuery(s)%3B%0A%09%09%09%09%09%09storage.setItem(%22token%22%2C%20response.oauth_token)%3B%0A%09%09%09%09%09%09storage.setItem(%22secret%22%2C%20response.oauth_token_secret)%3B%0A%09%09%09%09%09%09loadGoogle%20(dom%2C%20storage%2C%20response.oauth_token%2C%20response.oauth_token_secret)%3B%0A%09%09%09%09%09%7D)%3B%0A%09%09%09%09%09return%3B%0A%09%09%09%09%7D%0A%09%09%09%7D%20else%20if%20(token%20!%3D%3D%20undefined%20%26%26%20secret%20!%3D%3D%20undefined)%20%7B%0A%09%09%09%09loadGoogle%20(dom%2C%20storage%2C%20token%2C%20secret)%3B%0A%09%09%09%09return%3B%0A%09%09%09%7D%0A%09%09%09showSetupLink%20(dom%2C%20storage)%3B%0A%09%09%7D)%3B%09%09%0A%09%7D%0A%09%0A%09return%20%7B%0A%09%09%0A%09%09%2F**%0A%09%09%20*%20Invoked%20when%20element%20is%20first%20introduced%20(on%20DOMContentLoaded%20or%20by%20AJAX%20update)%0A%09%09%20*%20%40param%20%7Bobject%7D%20dom%20The%20ADsafe%20dom%20wrapper%0A%09%09%20*%2F%0A%09%09onload%20%3A%20function%20(%20dom%20)%20%7B%0A%09%09%09initialize%20(dom)%3B%0A%09%09%7D%2C%0A%09%09%0A%09%09ondata%3A%20function()%20%7B%0A%09%09%09var%20ds%20%3D%20lib.ts.data.getDatasource()%3B%0A%09%09%09if%20(ds.getResource(%20%22urn%3Atradeshift%3APage%22%20).getObject(%20UI_NS%20%2B%20%22url%22%20)%20!%3D%3D%20null)%20%7B%20%2F%2F%20We%20don't%20get%20the%20page%20URL%20until%20several%20calls%20into%20ondata()%0A%09%09%09%09pageQuery%20%3D%20parseQuery%20(ds.getResource(%20%22urn%3Atradeshift%3APage%22%20).getObject(%20UI_NS%20%2B%20%22query%22%20))%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%09%09%0A%09%09%2F**%0A%09%09%20*%20Invoked%20before%20element%20is%20updated%20(AJAX%20update)%0A%09%09%20*%2F%0A%09%09onbeforeupdate%20%3A%20function%20()%20%7B%7D%2C%0A%09%09%0A%09%09%2F**%0A%09%09%20*%20Invoked%20after%20element%20is%20updated%20(AJAX%20update)%0A%09%09%20*%20%40param%20%7Bobject%7D%20dom%20The%20ADsafe%20dom%20wrapper.%0A%09%09%20*%2F%0A%09%09onafterupdate%20%3A%20function%20(%20dom%20)%20%7B%7D%2C%0A%09%09%0A%09%09%2F**%0A%09%09%20*%20Invoked%20on%20window.unload%0A%09%09%20*%2F%0A%09%09onunload%20%3A%20function%20()%20%7B%7D%0A%09%7D%3B%0A%7D",
                "xhtml":"%3Chtml%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%3E%0A%09%3Chead%3E%0A%09%09%3Ctitle%3EComponent%3C%2Ftitle%3E%0A%09%3C%2Fhead%3E%0A%09%3Cbody%3E%0A%09%09%3C!--%20use%20ADsafe%20markup%20--%3E%0A%09%09%3Cdiv%20class%3D%22grey%20border%20box%20r_all%22%3E%0A%09%09%09%3Ch2%3EAddress%20book%3C%2Fh2%3E%0A%09%09%09%3Cdiv%20class%3D%22setup%22%20style%3D%22display%3A%20none%3B%22%3E%0A%09%09%09%09%3Ca%20href%3D%22https%3A%2F%2Fwww.google.com%2Faccounts%2FOAuthAuthorizeToken%22%3ESETUP%3C%2Fa%3E%0A%09%09%09%3C%2Fdiv%3E%0A%09%09%09%3Cdiv%20class%3D%22main%22%3E%0A%09%09%09%09%3Cp%3EPlease%20select%20the%20Google%20contacts%20to%20import%20into%20Tradeshift%20manual%20contacts.%3C%2Fp%3E%0A%09%09%09%3C%2Fdiv%3E%0A%09%09%3C%2Fdiv%3E%0A%09%3C%2Fbody%3E%0A%3C%2Fhtml%3E"
            }
        }
    }
}